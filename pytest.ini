[pytest]
# ========================================================================
# Pytest Configuration - Planning Application Test Suite
# ========================================================================
# Last Updated: 2025-11-10
# Test Count: ~900 tests across 77 files
#
# Usage:
#   pytest tests/                    # Run all tests
#   pytest tests/ -m unit            # Run only unit tests
#   pytest tests/ -m "not slow"      # Skip slow tests
#   pytest -k test_models            # Run tests matching pattern
# ========================================================================

# Test discovery patterns
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Custom marks (register to avoid warnings)
markers =
    slow: marks tests as slow (deselect with '-m "not slow"')
    integration: marks tests as integration tests (multi-component)
    unit: marks tests as unit tests (isolated, fast)
    reasonableness: marks tests as business logic validation
    ui: marks tests as UI workflow tests
    performance: marks tests as performance benchmarks
    regression: marks tests as critical regression gates (must pass)
    solver_required: marks tests that require solver installation
    baseline: marks tests as baseline/benchmark tests

# Output and reporting options
addopts =
    -v
    --tb=short
    -ra
    --strict-markers
    --strict-config
    --import-mode=importlib
    -W default

# Console output format (options: progress, count, classic)
console_output_style = progress

# Minimum Python version
minversion = 3.11

# Test timeout (commented - enable if needed)
# timeout = 300                     # 5 minute default timeout per test

# Coverage options (when using pytest-cov)
# Uncomment to enable coverage reporting
# [coverage:run]
# source = src
# omit =
#     */tests/*
#     */test_*.py
#     */__pycache__/*
#     */venv/*

# [coverage:report]
# precision = 2
# show_missing = True
# skip_covered = False
# exclude_lines =
#     pragma: no cover
#     def __repr__
#     raise AssertionError
#     raise NotImplementedError
#     if __name__ == .__main__.:
#     if TYPE_CHECKING:
#     @abstractmethod

# Logging configuration (when tests run)
# Set log_cli to true to see logs during test execution
log_cli = false
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

# Test collection
norecursedirs = .git .tox dist build *.egg venv archive __pycache__

# ========================================================================
# Test Execution Tiers (Usage Examples)
# ========================================================================
#
# Tier 1: Pre-commit (< 30s)
#   pytest tests/ -m unit --maxfail=3
#
# Tier 2: Pre-push (< 5 min)
#   pytest tests/ -m "unit or integration" -m "not slow"
#   pytest tests/test_integration_ui_workflow.py  # CRITICAL GATE
#
# Tier 3: CI Pipeline (< 30 min)
#   pytest tests/ -m "not slow"
#
# Tier 4: Nightly (unlimited)
#   pytest tests/ --run-slow
#
# ========================================================================
