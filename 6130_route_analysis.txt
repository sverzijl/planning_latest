Loading network data...

======================================================================
ROUTE LEGS TO 6130
======================================================================

Route: 6122 → Lineage
  Mode: frozen
  Transit: 0.5 days
  Cost: $0.5/unit

Route: Lineage → 6130
  Mode: frozen
  Transit: 3.0 days
  Cost: $1.2/unit

======================================================================
ENUMERATED ROUTES TO 6130
======================================================================

Route 0:
  Path: 6122 → Lineage → 6130
  Transit: 3.5 days
  Cost: $1.70/unit
  Hops: 2
  Route legs:
    - 6122 → Lineage: frozen (0.5d, triggers_thaw=False)
    - Lineage → 6130: frozen (3.0d, triggers_thaw=True)

======================================================================
SHELF LIFE ANALYSIS FOR 6130 ROUTE
======================================================================

Shelf life rules:
  Frozen: 120 days
  Thawed (after arrival at 6130): 14 days
  Minimum at delivery: 7 days

Route 0 analysis:
  ✓ Route includes Lineage (frozen buffer)
  ✓ Lineage → 6130 segment exists
  Transit time Lineage → 6130: 3.0 days
  Product state at Lineage: FROZEN (120d shelf life)
  Product state at 6130 arrival: FROZEN
  Product state after thawing: THAWED (14d shelf life)
  Available shelf life after thaw: 14d
  ✓ FEASIBLE: 14d >= 7d minimum

======================================================================
MODEL LIMITATION IDENTIFIED
======================================================================

The current Pyomo model does NOT properly model:

1. **Inventory at Lineage:**
   - Lineage has no demand, so no inventory variables created
   - Product can't accumulate at frozen buffer

2. **State tracking (frozen vs thawed):**
   - Model doesn't track whether inventory is frozen or ambient
   - Can't model shelf life reset when product thaws at 6130

3. **Thawing timing:**
   - Model doesn't know WHEN product thaws at 6130
   - Can't enforce 14-day post-thaw shelf life constraint

**Current approach (simplified):**
- Treats 6130 route as frozen with 120-day limit
- Assumes product arrives frozen and thaws immediately
- Assumes 14 days remaining after thaw (correct by luck for this route)

**Correct approach would require:**
- Inventory variables at Lineage
- State variables (frozen/ambient) for inventory
- Thawing decision variables at 6130
- Shelf life constraints based on current state
- Transit time accounting in frozen vs ambient mode

**Impact:**
Currently works because the route is short (3.5d total), but would
fail for longer frozen routes where timing of thaw matters.

